<div class="portal-header">
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <div>
            <div style="display:flex; gap:10px; margin-bottom: 20px;">
                <button class="primary-btn" onclick="renderDashboard(cognitoUser.getUsername())"
                    style="padding: 10px 15px; font-size: 0.7rem;"> <strong>‚Üê</strong>Dashboard
                </button>
                <button class="primary-btn" id="subject-history-btn"
                    style="padding: 10px 15px; font-size: 0.7rem; background: var(--bg-card); border: 1px solid var(--border-main);">
                    <strong>‚åõ</strong>Chat History
                </button>
            </div>
            <h1 id="portal-subject-name">Subject Portal</h1>
            <p class="text-dim" id="portal-curriculum">Curriculum: N/A</p>
            <p class="text-dim" id="portal-grade" style="margin-top: 5px;"></p>
        </div>
    </div>
</div>

<div class="atp-container stats-card" style="margin-top: 30px;">
    <h3>Annual Teaching Plan (ATP) - 2026</h3>
    <p class="text-dim" style="font-size: 0.85rem; margin-bottom: 20px;">Select a topic below to start your lesson</p>
    <div class="atp-list" id="atp-terms-container">
        <!-- Terms populated by JS -->
    </div>
</div>

<!-- Lesson History Modal -->
<div id="lesson-history-modal" class="modal-overlay">
    <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
        <div class="modal-header">
            <h3 id="history-modal-title">Subtopic History</h3>
            <button class="close-btn" onclick="closeHistoryModal()">&times;</button>
        </div>
        <div class="modal-body">
            <p id="history-modal-desc" class="text-dim" style="margin-bottom: 20px;">
                <!-- Description context -->
            </p>

            <div class="action-row" style="margin-bottom: 20px;">
                <button class="primary-btn" id="start-new-lesson-btn" style="width: 100%;">
                    Start New Lesson üöÄ
                </button>
            </div>

            <h4 style="border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 15px;">
                Previous Lessons</h4>
            <div id="history-list" class="history-list">
                <!-- History items will be injected here -->
                <p class="text-dim">No history yet.</p>
            </div>
        </div>
    </div>
</div>